{"version":3,"sources":["../../../../src/app/globalErrors/business/error.business.js"],"names":["require","Error","message","msg","sendgrid","mailerList","exports","registerError","error","name","err","description","stack","save","then","process","stderr","write","a","map","user","i","sendmail","email","exitCode","catch"],"mappings":";;eAAkBA,QAAQ,uBAAR,C;IAAVC,K,YAAAA,K;;AACR,IAAMC,UAAUF,QAAQ,0BAAR,EAAoCG,GAApD;AACA,IAAMC,WAAWJ,QAAQ,wBAAR,CAAjB;AACA,IAAMK,aAAaL,QAAQ,wBAAR,EAAkCK,UAArD;AACAC,QAAQC,aAAR,GAAwB,eAAO;AAC7B,MAAIC,QAAQ,IAAIP,KAAJ,CAAU;AACpBQ,UAAMC,IAAID,IADU;AAEpBE,iBAAaD,IAAIE;AAFG,GAAV,CAAZ;AAIAJ,QACGK,IADH,GAEGC,IAFH,CAEQ,aAAK;AACTC,YAAQC,MAAR,CAAeC,KAAf,CAAqBC,EAAEP,WAAvB;AACAN,eAAWc,GAAX,CAAe,UAACC,IAAD,EAAOC,CAAP,EAAa;AAC1BjB,eAASkB,QAAT,CAAkBF,KAAKG,KAAvB,EAA8B,IAA9B,EAAoCH,KAAKX,IAAzC,EAA+C,OAA/C,EAAwDS,EAAEP,WAA1D;AACD,KAFD;;AAIAI,YAAQS,QAAR,GAAmB,CAAnB;AACD,GATH,EAUGC,KAVH,CAUS,aAAK;AACVV,YAAQS,QAAR,GAAmB,CAAnB;AACD,GAZH;AAaD,CAlBD","file":"error.business.js","sourcesContent":["const { Error } = require(\"../models/error.model\");\r\nconst message = require(\"../../../config/messages\").msg;\r\nconst sendgrid = require(\"../../utility/sendmail\");\r\nconst mailerList = require(\"../../../config/config\").mailerList;\r\nexports.registerError = err => {\r\n  var error = new Error({\r\n    name: err.name,\r\n    description: err.stack\r\n  });\r\n  error\r\n    .save()\r\n    .then(a => {\r\n      process.stderr.write(a.description);\r\n      mailerList.map((user, i) => {\r\n        sendgrid.sendmail(user.email, null, user.name, \"error\", a.description);\r\n      });\r\n\r\n      process.exitCode = 1;\r\n    })\r\n    .catch(e => {\r\n      process.exitCode = 1;\r\n    });\r\n};\r\n"]}